<div class="edit-button" *ngIf="isAdministrator">
    <button mat-raised-button color="primary" type="button"
            (click)="editCompetition()">Edit Competition
    </button>
</div>
<div class="relative-container">
    <div class="result-container" *ngIf="!isLoading">
        <div class="round" *ngFor="let round of competition.rounds">
            <h2 class="round__title">{{ getRoundLabel(round.id) | uppercase}}</h2>
            <ng-container *ngIf="!smallScreen">
                <div class="heat" *ngFor="let heat of round.heats; let heatIndex = index">
                    <h4 class="heat__title">Heat {{heatIndex + 1}}</h4>
                    <ng-container *ngIf="heat.results.length > 0">
                        <div class="rider" *ngFor="let result of heat.results">
                            <rs-rider-result [riderId]="result.riderId"
                                             [riderColorIndex]="result.color"
                                             [resultType]="getHeatStatus(heat)"
                                             [points]="result.value"
                                             [roundNumber]="round.id"
                                             (click)="highlightRider(result.riderId)"
                                             [isHighlighted]="result.riderId === highlightedRider && highlightActive"
                                             [isFadedOut]="result.riderId !== highlightedRider && highlightActive"
                            ></rs-rider-result>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="heat.results.length === 0">
                        <div class="rider" *ngFor="let rider of heat.riders; let riderIndex = index">
                            <rs-rider-result [riderId]="rider"
                                             [riderColorIndex]="riderIndex"
                                             [resultType]="getHeatStatus(heat)"
                                             [roundNumber]="round.id"
                                             (click)="highlightRider(rider)"
                                             [isHighlighted]="rider === highlightedRider && highlightActive"
                                             [isFadedOut]="rider !== highlightedRider && highlightActive"
                            ></rs-rider-result>
                        </div>
                    </ng-container>
                </div>
            </ng-container>

            <ng-container *ngIf="smallScreen">
                <rs-carousel [index]="0" [auto]="false">
                    <ng-container *ngFor="let heat of round.heats; let heatIndex = index">
                        <div class="heat" *rs-carousel-item>
                            <h4 class="heat__title">Heat {{heatIndex + 1}}</h4>
                            <ng-container *ngIf="heat.results.length > 0">
                                <ng-container *ngFor="let result of heat.results">
                                    <div class="rider">
                                        <rs-rider-result [riderId]="result.riderId"
                                                         [riderColorIndex]="result.color"
                                                         [resultType]="getHeatStatus(heat)"
                                                         [points]="result.value"
                                                         [roundNumber]="round.id"
                                                         (click)="highlightRider(result.riderId)"
                                                         [isHighlighted]="result.riderId === highlightedRider && highlightActive"
                                                         [isFadedOut]="result.riderId !== highlightedRider && highlightActive"

                                        ></rs-rider-result>
                                    </div>
                                </ng-container>
                            </ng-container>
                            <ng-container *ngIf="heat.results.length === 0">
                                <ng-container *ngFor="let rider of heat.riders; let riderIndex = index">
                                    <div class="rider" *ngIf="heat.results.length === 0" >
                                        <rs-rider-result [riderId]="rider"
                                                         [riderColorIndex]="riderIndex"
                                                         [resultType]="getHeatStatus(heat)"
                                                         [roundNumber]="round.id"
                                                         (click)="highlightRider(rider)"
                                                         [isHighlighted]="rider === highlightedRider && highlightActive"
                                                         [isFadedOut]="rider !== highlightedRider && highlightActive"
                                        ></rs-rider-result>
                                    </div>
                                </ng-container>

                            </ng-container>

                        </div>
                    </ng-container>
                </rs-carousel>
            </ng-container>


        </div>
    </div>

    <rs-progress-line *ngIf="!smallScreen"
                      [highlightedRider]="highlightedRider"
                      [activeHighlight]="highlightActive"
                      [lines]="lines"
    ></rs-progress-line>
</div>



